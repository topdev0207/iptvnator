<mat-drawer-container class="main-container" (backdropClick)="close()">
    <!-- sidebar content -->
    <mat-drawer
        #drawer
        mode="side"
        opened
        (keydown.escape)="close()"
        disableClose
    >
        <ng-container *ngIf="channels$ | async as channels">
            <app-channel-list-container
                [channelList]="channels"
                (changeChannel)="playChannel($event)"
            >
            </app-channel-list-container>
        </ng-container>
    </mat-drawer>

    <mat-drawer-content>
        <ng-container *ngIf="activeChannel$ | async as activeChannel">
            <!-- toolbar with drawer icon -->
            <mat-toolbar color="primary">
                <button
                    mat-icon-button
                    mat-toolbar="Add to favorites"
                    (click)="drawer.toggle()"
                    matTooltip="Open channels list"
                >
                    <mat-icon>menu</mat-icon>
                </button>
                <button
                    mat-icon-button
                    (click)="addToFavorites(activeChannel)"
                    matTooltip="Toggle favorite flag"
                >
                    <mat-icon>
                        {{
                            (favorites$ | async).includes(activeChannel.id)
                                ? 'star'
                                : 'star_outline'
                        }}</mat-icon
                    >
                </button>
                {{ activeChannel.name }}
                <div class="spacer"></div>
                <button mat-icon-button (click)="openAbout()">
                    <mat-icon>info</mat-icon>
                </button>
            </mat-toolbar>

            <ng-container *ngIf="player === 'videojs'">
                <app-vjs-player
                    [options]="{
                        sources: [
                            {
                                src: activeChannel.url,
                                type: 'application/x-mpegURL'
                            }
                        ]
                    }"
                ></app-vjs-player>
            </ng-container>
        </ng-container>
        <!-- default html player component -->
        <video
            #videoPlayer
            *ngIf="player === 'html5'"
            id="video-player"
            autoplay="true"
            controls="true"
            muted="muted"
        ></video>
    </mat-drawer-content>
</mat-drawer-container>
